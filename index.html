<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K·ª∑ ni·ªám 1 th√°ng y√™u nhau</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    
    <!-- LOADING SCREEN CSS -->
    <style>
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b9d, #4d94ff);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <h2>ƒêang t·∫£i k·ª∑ ni·ªám t√¨nh y√™u... üíñ</h2>
        <p id="loadingStatus">K·∫øt n·ªëi v·ªõi Firebase...</p>
    </div>

    <!-- Ph·∫ßn tr√°i tim bay -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>K·ª∑ ni·ªám <span class="heart">‚ô•</span> c·ªßa ch√∫ng ta</h1>
            <div class="couple-names">
                <span class="name">[T√™n b·∫°n]</span>
                <span class="heart-icon">‚ù§</span>
                <span class="name">[T√™n ng∆∞·ªùi y√™u]</span>
            </div>
        </header>

        <!-- B·ªô ƒë·∫øm ng∆∞·ª£c -->
        <section class="countdown-container">
            <h2 class="countdown-title">Ch√∫ng ta ƒë√£ y√™u nhau ƒë∆∞·ª£c...</h2>
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">30</div>
                    <div class="countdown-label">Ng√†y</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">0</div>
                    <div class="countdown-label">Gi·ªù</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">0</div>
                    <div class="countdown-label">Ph√∫t</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">0</div>
                    <div class="countdown-label">Gi√¢y</div>
                </div>
            </div>
            <p class="countdown-date" id="countdownDate"></p>
        </section>

        <!-- Album ·∫£nh -->
        <section class="photo-album">
            <h2 class="section-title">Nh·ªØng k·ª∑ ni·ªám ƒë√°ng nh·ªõ</h2>
            <div class="photo-grid" id="photoGrid">
                <!-- ·∫¢nh s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
            </div>
        </section>

        <!-- L·ªùi nh·∫Øn y√™u th∆∞∆°ng -->
        <section class="message-container">
            <h2 class="section-title">L·ªùi nh·∫Øn</h2>
            <div class="signature" id="signature">ƒê√¥i b·∫°n tr·∫ª ƒë√°ng iuuu</div>
        </section>

        <!-- Ph·∫ßn th√™m k·ª∑ ni·ªám -->
        <section class="memory-form">
            <h3 class="form-title"><i class="fas fa-book"></i> Th√™m k·ª∑ ni·ªám c·ªßa ch√∫ng m√¨nh</h3>
            <div class="form-description"></div>
            <button class="form-button" onclick="window.crudManager.showMemoryForm()">
                <i class="fas fa-plus-circle"></i> Th√™m k·ª∑ ni·ªám m·ªõi
            </button>
        </section>

        <!-- K·ª∑ ni·ªám ƒë√£ l∆∞u -->
        <section class="memories-container">
            <h2 class="section-title"><i class="fas fa-heart"></i> K·ª∑ ni·ªám c·ªßa ch√∫ng ta</h2>
            <div id="memoriesList">
                <!-- C√°c k·ª∑ ni·ªám s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
            </div>
        </section>

        <!-- Ph·∫ßn t∆∞∆°ng t√°c -->
        <section class="interactive">
            <h2 class="section-title">G·ª≠i y√™u th∆∞∆°ng</h2>
            <div class="love-buttons">
                <button class="love-button" onclick="showLove()">
                    <i class="fas fa-heart"></i> G·ª≠i y√™u th∆∞∆°ng
                </button>
                <button class="love-button secondary" onclick="playMusic()">
                    <i class="fas fa-music"></i> B·∫≠t nh·∫°c
                </button>
                <button class="love-button secondary" onclick="changeTheme()">
                    <i class="fas fa-palette"></i> ƒê·ªïi n·ªÅn
                </button>
            </div>
            <div id="loveMessageDisplay" class="love-message-display"></div>
        </section>

        <!-- Audio player (·∫©n) -->
        <audio id="backgroundMusic" loop>
            <source src="music/cute.mp3" type="audio/mpeg">
            Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
        </audio>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>¬© <span id="currentYear"></span> ‚Ä¢ iuuuu em nh√¨uu</p>
                <div class="footer-hearts">
                    <span>‚ù§</span>
                    <span>‚ù§</span>
                    <span>‚ù§</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Floating Action Buttons -->
    <div class="floating-actions">
        <button class="floating-btn" id="addMemoryBtn" title="Th√™m k·ª∑ ni·ªám m·ªõi">
            <i class="fas fa-plus"></i>
        </button>
        <button class="floating-btn" id="addPhotoBtn" title="Th√™m ·∫£nh m·ªõi">
            <i class="fas fa-camera"></i>
        </button>
    </div>

    <!-- ========== FIREBASE SDK ========== -->
    <!-- D√πng phi√™n b·∫£n 8.10.0 cho t∆∞∆°ng th√≠ch t·ªët -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <!-- ========== APP SCRIPTS ========== -->
    <!-- ƒê·∫∂T CRUD-MANAGER V√Ä SCRIPT.JS TR∆Ø·ªöC -->
    <script src="crud-manager.js"></script>
    <script src="script.js"></script>
    
    <!-- Firebase Manager (load sau c√πng) -->
    <script src="firebase-manager.js"></script>

    <!-- ========== INITIALIZATION ========== -->
    <script>
        // Firebase configuration - D√ôNG CONFIG C·ª¶A B·∫†N
        const firebaseConfig = {
            apiKey: "AIzaSyCzUoT4z5FUan4HZfQvo9OTWwkE43kKfvU",
            authDomain: "thursday-a5b7c.firebaseapp.com",
            projectId: "thursday-a5b7c",
            storageBucket: "thursday-a5b7c.firebasestorage.app",
            messagingSenderId: "1099485371344",
            appId: "1:1099485371344:web:7de3d4f95b5285f006b7d5",
            measurementId: "G-SQJW67LY57"
        };

        // Initialize Firebase khi DOM ready
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üíñ Love Anniversary App loading...');
            
            // Update current year
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            try {
                // Kh·ªüi t·∫°o Firebase
                if (typeof firebase !== 'undefined') {
                    firebase.initializeApp(firebaseConfig);
                    console.log('‚úÖ Firebase initialized');
                } else {
                    console.error('‚ùå Firebase SDK kh√¥ng ƒë∆∞·ª£c load');
                }
            } catch (error) {
                console.error('‚ùå L·ªói kh·ªüi t·∫°o Firebase:', error);
            }
            
            // ·∫®n loading screen sau 10 gi√¢y (fallback)
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen && !loadingScreen.classList.contains('hidden')) {
                    loadingScreen.classList.add('hidden');
                    console.log('‚ö†Ô∏è Fallback: ·∫®n loading screen sau timeout');
                }
            }, 10000);
        });

        // X·ª≠ l√Ω khi Firebase ready
        document.addEventListener('firebaseReady', function () {
            console.log('üéâ Firebase ready event received');
            
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingStatus = document.getElementById('loadingStatus');
            
            if (loadingScreen) {
                loadingStatus.textContent = 'ƒê√£ t·∫£i xong! ƒêang hi·ªÉn th·ªã...';
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                }, 1000);
            }
        });
    </script>
</body>
</html>